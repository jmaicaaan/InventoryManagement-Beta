<div layout="column" layout-padding>
    <form name="form" layout="column">
        <div>
            <div>
                <md-input-container class="md-block">
                    <label>Item Name</label>
                    <input name="itemName" ng-model="vm.item.name" type="text" required ng-maxlength="20" ng-minlength="2">
                    
                    <div ng-messages="form.itemName.$error" style="color:maroon" role="alert">
                        <div ng-message="required">You did not enter an item name</div>
                        <div ng-message="maxlength">The item name has to be less than 30 characters long.</div>
                        <div ng-message="minlength">The item name has to be more than 2 characters long. </div>
                    </div>
                </md-input-container>
            </div>
            <div>
                <md-input-container class="md-block">
                    <label>Item Description</label>
                    <input name="itemDescription" ng-model="vm.item.description" type="text" required ng-maxlength="50" ng-minlength="5">
                    
                    <div ng-messages="form.itemDescription.$error" style="color:maroon" role="alert">
                        <div ng-message="required">You did not enter an item description</div>
                        <div ng-message="maxlength">The item description has to be less than 50 characters long.</div>
                        <div ng-message="minlength">The item description has to be more than 5 characters long. </div>
                    </div>
                </md-input-container>
            </div>
            <div>
                 <md-input-container class="md-block">
                     <label>Item Code</label>
                    <input name="itemCode" ng-model="vm.item.code" type="text" required ng-maxlength="15" ng-minlength="3">
                    <md-icon md-svg-src="app/icons/ic_autorenew_24px.svg" class="icon-on-input" ng-click="vm.generateItemCode()"></md-icon>

                    <div ng-messages="form.itemCode.$error" style="color:maroon" role="alert">
                        <div ng-message="required">You did not enter an item code</div>
                        <div ng-message="maxlength">The item code has to be less than 15 characters long.</div>
                        <div ng-message="minlength">The item code has to be more than 3 characters long. </div>
                    </div>
                </md-input-container>
            </div>
            <div>
                <md-input-container class="md-block">
                    <label>Item Location</label>
                    <input name="itemLocation" ng-model="vm.item.location" type="text" required ng-maxlength="50" ng-minlength="5">

                     <div ng-messages="form.itemLocation.$error" style="color:maroon" role="alert">
                        <div ng-message="required">You did not enter an item location</div>
                        <div ng-message="maxlength">The item location has to be less than 50 characters long.</div>
                        <div ng-message="minlength">The item location has to be more than 5 characters long. </div>
                    </div>
                </md-input-container>
            </div>

            <div>
                <md-chips name="suppliers" ng-model="vm.selectedSuppliers" md-autocomplete-snap md-autocomplete-wrap-override md-max-chips="4">
                    <md-autocomplete 
                                md-search-text="vm.searchText" 
                                md-input-name="listSupplier" 
                                md-items="supplier in vm.ItemsService.listSuppliers  | filter: vm.searchText" 
                                placeholder="Supplier Name" required>
                        <span><strong>{{supplier.name}}</strong></span>
                    </md-autocomplete>
                    <md-chip-template>
                        {{$chip.name}}
                    </md-chip-template>
                </md-chips>

                 <div ng-messages="form.suppliers.$error" style="color:maroon" role="alert">
                    <div ng-message="md-max-chips">You reached the maximum number of suppliers.</div>
                </div>
            </div>

            <div>
                <md-input-container class="md-block">
                    <label>Brand</label>
                    <md-select name="brand" ng-model="vm.item.brand.id" required>
                        <md-option ng-repeat="brand in vm.ItemsService.listBrands" ng-value="brand.id">
                            {{brand.name}}
                        </md-option>
                    </md-select>

                     <div ng-messages="form.brand.$error" style="color:maroon" role="alert">
                        <div ng-message="required">You did not choose an item brand.</div>
                    </div>
                </md-input-container>
            </div>
            <div>
                <md-input-container class="md-block">
                    <label>Category</label>
                    <md-select name="category" ng-model="vm.item.category.id" required>
                        <md-option ng-repeat="category in vm.ItemsService.listCategories" ng-value="category.id">
                            {{category.name}}
                        </md-option>
                    </md-select>

                     <div ng-messages="form.category.$error" style="color:maroon" role="alert">
                        <div ng-message="required">You did not choose an item category.</div>
                    </div>
                </md-input-container>
            </div>
            <div>
                <md-input-container class="md-block">
                    <label>Unit</label>
                    <md-select name="unit" ng-model="vm.item.unit.id" required>
                        <md-option ng-repeat="unit in vm.ItemsService.listUnits" ng-value="unit.id">
                            {{unit.name}}
                        </md-option>
                    </md-select>

                    <div ng-messages="form.unit.$error" style="color:maroon" role="alert">
                        <div ng-message="required">You did not choose an item unit.</div>
                    </div>
                </md-input-container>
            </div>
        </div>

        <div layout="row" layout-align="end end">
            <md-button class="md-primary" aria-label="Open dialog" ui-sref="dashboard.items">Cancel</md-button>
            <md-button class="md-primary md-raised" aria-label="Open dialog" 
                ng-disabled="form.$invalid" ng-click="vm.editItem(vm.item)">Edit Item</md-button>
        </div>
    </form>
</div>